<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•åˆ é™¤å†å²ä»»åŠ¡åŠŸèƒ½</title>
    <meta charset="utf-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-btn { 
            background: #ef4444; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 10px;
        }
        .test-btn:hover { background: #dc2626; }
        .log { 
            background: #f5f5f5; 
            border: 1px solid #ddd; 
            border-radius: 4px; 
            padding: 10px; 
            margin: 10px 0; 
            font-family: monospace; 
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª åˆ é™¤å†å²ä»»åŠ¡åŠŸèƒ½æµ‹è¯•</h1>
    
    <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯• <code>showCustomConfirm</code> å‡½æ•°æ˜¯å¦æ­£ç¡®å®ç°ã€‚</p>
    
    <button class="test-btn" onclick="testShowCustomConfirm()">æµ‹è¯• showCustomConfirm å‡½æ•°</button>
    <button class="test-btn" onclick="testDeleteHistoryTask()">æµ‹è¯•åˆ é™¤å†å²ä»»åŠ¡å¯¹è¯æ¡†</button>
    
    <div id="log" class="log">
        <div>ğŸ“‹ æµ‹è¯•æ—¥å¿—ï¼š</div>
    </div>

    <script>
        // æ¨¡æ‹Ÿ showCustomConfirm å‡½æ•°ï¼ˆå¤åˆ¶è‡ªä¸»åº”ç”¨ï¼‰
        function showCustomConfirm(title, message, confirmText = 'ç¡®è®¤', cancelText = 'å–æ¶ˆ') {
            return new Promise((resolve) => {
                // åˆ›å»ºæ¨¡æ€æ¡†å…ƒç´ 
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0,0,0,0.7); backdrop-filter: blur(4px);
                    z-index: 9999; display: flex; align-items: center; justify-content: center;
                `;
                
                modal.innerHTML = `
                    <div style="
                        background: white; border-radius: 16px; padding: 24px; max-width: 400px; width: 90%;
                        box-shadow: 0 20px 40px rgba(0,0,0,0.3); text-align: center;
                    ">
                        <div style="font-size: 48px; margin-bottom: 16px;">âš ï¸</div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: #333;">${title}</div>
                        <div style="font-size: 14px; color: #666; margin-bottom: 24px; line-height: 1.5; white-space: pre-line;">${message}</div>
                        <div style="display: flex; gap: 12px; justify-content: center;">
                            <button id="cancelBtn" style="
                                padding: 10px 20px; border-radius: 8px; border: 1px solid #ddd;
                                background: #f5f5f5; color: #333; cursor: pointer; min-width: 80px;
                            ">${cancelText}</button>
                            <button id="confirmBtn" style="
                                padding: 10px 20px; border-radius: 8px; border: none;
                                background: #ef4444; color: white; cursor: pointer; min-width: 80px;
                            ">${confirmText}</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                const confirmBtn = modal.querySelector('#confirmBtn');
                const cancelBtn = modal.querySelector('#cancelBtn');
                
                confirmBtn.onclick = () => {
                    document.body.removeChild(modal);
                    resolve(true);
                };
                
                cancelBtn.onclick = () => {
                    document.body.removeChild(modal);
                    resolve(false);
                };
                
                // ESCé”®æ”¯æŒ
                const handleEscape = (event) => {
                    if (event.key === 'Escape') {
                        document.removeEventListener('keydown', handleEscape);
                        document.body.removeChild(modal);
                        resolve(false);
                    }
                };
                
                document.addEventListener('keydown', handleEscape);
            });
        }

        function log(message) {
            const logEl = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML += `<div>[${time}] ${message}</div>`;
        }

        async function testShowCustomConfirm() {
            log('ğŸ”„ å¼€å§‹æµ‹è¯• showCustomConfirm å‡½æ•°...');
            
            try {
                const result = await showCustomConfirm(
                    'æµ‹è¯•ç¡®è®¤',
                    'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¡®è®¤å¯¹è¯æ¡†ã€‚\n\nè¯·é€‰æ‹©ä½ çš„æ“ä½œï¼š\nâ€¢ ç‚¹å‡»"ç¡®å®š"è¿”å› true\nâ€¢ ç‚¹å‡»"å–æ¶ˆ"è¿”å› false\nâ€¢ æŒ‰ESCé”®è¿”å› false',
                    'ç¡®å®š',
                    'å–æ¶ˆ'
                );
                
                log(`âœ… showCustomConfirm è¿”å›ç»“æœ: ${result}`);
                
                if (typeof result === 'boolean') {
                    log('âœ… å‡½æ•°æ­£å¸¸å·¥ä½œï¼Œè¿”å›ç±»å‹æ­£ç¡®');
                } else {
                    log('âŒ å‡½æ•°è¿”å›ç±»å‹é”™è¯¯');
                }
                
            } catch (error) {
                log(`âŒ æµ‹è¯•å¤±è´¥: ${error.message}`);
            }
        }

        async function testDeleteHistoryTask() {
            log('ğŸ”„ æµ‹è¯•åˆ é™¤å†å²ä»»åŠ¡å¯¹è¯æ¡†...');
            
            try {
                const confirmed = await showCustomConfirm(
                    'åˆ é™¤å†å²ä»»åŠ¡',
                    `ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå†å²ä»»åŠ¡å—ï¼Ÿ\n\nè¿™å°†åˆ é™¤ï¼š\nâ€¢ ä»»åŠ¡è®°å½•\nâ€¢ ç›¸å…³çš„æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶\nâ€¢ ç›¸å…³çš„è§†é¢‘æ–‡ä»¶\n\næ­¤æ“ä½œä¸å¯æ¢å¤ï¼`,
                    'åˆ é™¤',
                    'å–æ¶ˆ'
                );
                
                if (confirmed) {
                    log('âœ… ç”¨æˆ·ç¡®è®¤åˆ é™¤ - åœ¨çœŸå®åº”ç”¨ä¸­ä¼šæ‰§è¡Œåˆ é™¤æ“ä½œ');
                } else {
                    log('â„¹ï¸ ç”¨æˆ·å–æ¶ˆåˆ é™¤æ“ä½œ');
                }
                
            } catch (error) {
                log(`âŒ æµ‹è¯•å¤±è´¥: ${error.message}`);
            }
        }

        log('ğŸš€ æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•');
    </script>
</body>
</html>